<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="List">
    <!-- List.selectAnnouncement -->
    <select id="selectAnnouncement" 
        parameterType="Map" resultType="Map">
        SELECT * FROM ANNOUNCEMENT;
    </select>
    <!-- List.selectQNA -->
    <select id="selectQNA" 
        parameterType="Map" resultType="Map">
        SELECT * FROM QNA;
    </select>
    <!-- List.selectFAQ -->
    <select id="selectFAQ" 
        parameterType="Map" resultType="Map">
        SELECT * FROM FAQ;
    </select>

    <!-- admin.updateAnnouncement -->
    <!-- DATE가 2023-01-01 형식으로 저장 -->
    <update id="updateAnnouncement" 
        parameterType="Map" resultType="Map">
        UPDATE ANNOUNCEMENT
        SET TITLE=#{TITLE},DATE=DATE_FORMAT(now(),'%Y-%m-%d')
        ;
    </update>
    <!-- admin.updateQNA -->
    <update id="updateQNA" 
        parameterType="Map" resultType="Map">
        UPDATE QNA
        SET TITLE=#{TITLE},DATE=DATE_FORMAT(now(),'%Y-%m-%d')
        ;
    </update>
    <!-- admin.updateFAQ -->
    <update id="updateFAQ" 
        parameterType="Map" resultType="Map">
        UPDATE FAQ
        SET TITLE=#{TITLE},DATE=DATE_FORMAT(now(),'%Y-%m-%d')
        ;
    </update>
    <!-- admin.deleteAnnouncement -->
    <select id="deleteAnnouncement" 
        parameterType="Map" resultType="Map">
        DELETE FROM ANNOUNCEMENT
                    INNER JOIN ADMIN_LIST
                                ON ADMIN_LIST.POST_NO_ANNO = ANNOUNCEMENT.POST_NO_ANNO
        WHERE POST_NO_ANNO=#{POST_NO}
        ;
    </select>
    <!-- admin.deleteQNA -->
    <select id="deleteQNA" 
        parameterType="Map" resultType="Map">
        DELETE FROM QNA
                    INNER JOIN ADMIN_LIST
                                ON ADMIN_LIST.POST_NO_ANNO = QNA.POST_NO_QNA
        WHERE POST_NO_QNA=#{POST_NO}
        ;
    </select>
    <!-- admin.deleteFAQ -->
    <select id="deleteFAQ" 
        parameterType="Map" resultType="Map">
        DELETE FROM FAQ
                    INNER JOIN ADMIN_LIST
                                ON ADMIN_LIST.POST_NO_ANNO = FAQ.POST_NO_FAQ
        WHERE POST_NO_FAQ=#{POST_NO}
        ;
    </select>
</mapper>